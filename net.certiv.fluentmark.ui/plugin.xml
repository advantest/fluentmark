<?xml version="1.0" encoding="UTF-8"?>
<plugin>
   <extension-point id="marker.calculators" name="Marker calculator based on typed regions" schema="schema/net.certiv.fluentmark.ui.markerCalculator.exsd"/>
   <extension-point id="marker.builders" name="Marker calculation builder" schema="schema/net.certiv.fluentmark.ui.markerCalculationBuilder.exsd"/>
   <extension-point id="content.assist.processor" name="Addtional content assist processor for Fluent Editor" schema="schema/net.certiv.fluentmark.ui.contentAssistProcessor.exsd"/>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="net.certiv.fluentmark.editorVisible">
			<with variable="activePartId">
    			<equals
          			value="net.certiv.fluentmark.ui.editor.FluentEditor">
    			</equals>
			</with>
      </definition>
   </extension>
   
   <extension
         point="org.eclipse.core.contenttype.contentTypes">
      <content-type
            base-type="org.eclipse.core.runtime.text"
            file-extensions="md,mdown,mkd,text"
            id="net.certiv.fluentmark.contentType"
            name="FluentMark Editor"
            priority="high">
      </content-type>
   </extension>


   <extension
         point="org.eclipse.core.filebuffers.documentSetup">
      <participant
            class="net.certiv.fluentmark.ui.editor.FluentDocumentSetupParticipant"
            extensions="md,mdown,mkd,text">
      </participant>
   </extension>
   <extension
         point="org.eclipse.core.filebuffers.documentSetup">
      <participant
            class="net.certiv.fluentmark.ui.markers.MarkerCalculationDocumentSetupParticipant"
            contentTypeId="net.certiv.fluentmark.contentType"
            extensions="md">
      </participant>
   </extension>

   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="net.certiv.fluentmark.ui.editor.FluentEditor"
            contributorClass="net.certiv.fluentmark.ui.editor.FluentActionBarContributor"
            default="true"
            extensions="md,mdown,mkd"
            icon="icons/obj16/fluentmark_doc.png"
            id="net.certiv.fluentmark.ui.editor.FluentEditor"
            name="FluentMark Editor"
            symbolicFontName="org.eclipse.jface.textfont">
         <contentTypeBinding
               contentTypeId="net.certiv.fluentmark.contentType">
         </contentTypeBinding>
      </editor>
   </extension>
   
   <extension
         id="problem"
         name="DOT marker"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.problemmarker">
      </super>
   </extension>
   
   
   <extension
         id="markers.documentation.problem"
         name="Documentation Problem"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.problemmarker">
      </super>
      <super
            type="org.eclipse.core.resources.textmarker">
      </super>
      <persistent
            value="true">
      </persistent>
   </extension>
   <extension
         id="markers.task.markdown"
         name="Markdown Task"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.textmarker">
      </super>
      <super
            type="org.eclipse.core.resources.taskmarker">
      </super>
   </extension>
   <extension
         id="markers.task.plantuml"
         name="PlantUML Task"
         point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.textmarker">
      </super>
      <super
            type="org.eclipse.core.resources.taskmarker">
      </super>
   </extension>

   <extension
         point="org.eclipse.ui.editors.annotationTypes">
      <type
            markerSeverity="2"
            markerType="net.certiv.fluentmark.problem"
            name="net.certiv.fluentmark.ui.error"
            super="org.eclipse.ui.workbench.texteditor.error">
      </type>
      <type
            markerSeverity="1"
            markerType="net.certiv.fluentmark.problem"
            name="net.certiv.fluentmark.ui.warning"
            super="org.eclipse.ui.workbench.texteditor.warning">
      </type>
      <type
            markerSeverity="0"
            markerType="net.certiv.fluentmark.problem"
            name="net.certiv.fluentmark.ui.info"
            super="org.eclipse.ui.workbench.texteditor.info">
      </type>
      <type
            name="net.certiv.fluentmark.ui.occurrences">
      </type>
      <type
            markerSeverity="0"
            markerType="net.certiv.fluentmark.task"
            name="net.certiv.fluentmark.ui.task.markdown"
            super="org.eclipse.ui.workbench.texteditor.task">
      </type>
      <type
            markerSeverity="0"
            markerType="net.certiv.fluentmark.task"
            name="net.certiv.fluentmark.ui.task.plantuml"
            super="org.eclipse.ui.workbench.texteditor.task">
      </type>
   </extension>

   <extension
         point="org.eclipse.ui.editors.markerAnnotationSpecification">
      <specification
            annotationImageProvider="net.certiv.fluentmark.ui.editor.AnnotationImageProvider"
            annotationType="net.certiv.fluentmark.ui.error">
      </specification>
      <specification
            annotationImageProvider="net.certiv.fluentmark.ui.editor.AnnotationImageProvider"
            annotationType="net.certiv.fluentmark.ui.warning">
      </specification>
      <specification
            annotationImageProvider="net.certiv.fluentmark.ui.editor.AnnotationImageProvider"
            annotationType="net.certiv.fluentmark.ui.info">
      </specification>
      
      <specification
            annotationType="net.certiv.fluentmark.ui.occurrences"
            colorPreferenceKey="occurrenceIndicationColor"
            colorPreferenceValue="212,212,212"
            contributesToHeader="false"
            highlightPreferenceKey="occurrenceHighlighting"
            highlightPreferenceValue="true"
            icon="$nl$/icons/full/obj16/searchm_obj.gif"
            includeOnPreferencePage="true"
            isGoToNextNavigationTarget="false"
            isGoToNextNavigationTargetKey="isOccurrenceGoToNextNavigationTarget"
            isGoToPreviousNavigationTarget="false"
            isGoToPreviousNavigationTargetKey="isOccurrenceGoToPreviousNavigationTarget"
            label="Occurrences"
            overviewRulerPreferenceKey="occurrenceIndicationInOverviewRuler"
            overviewRulerPreferenceValue="true"
            presentationLayer="4"
            showInNextPrevDropdownToolbarAction="true"
            showInNextPrevDropdownToolbarActionKey="showOccurrenceInNextPrevDropdownToolbarAction"
            textPreferenceKey="occurrenceIndication"
            textPreferenceValue="false"
            textStylePreferenceKey="occurrenceTextStyle"
            textStylePreferenceValue="NONE"
            verticalRulerPreferenceKey="occurrenceIndicationInVerticalRuler"
            verticalRulerPreferenceValue="false">
      </specification>
      <specification
            annotationImageProvider="net.certiv.fluentmark.ui.editor.AnnotationImageProvider"
            annotationType="net.certiv.fluentmark.ui.task.markdown"
            includeOnPreferencePage="true"
            label="Markdown Tasks">
      </specification>
      <specification
            annotationImageProvider="net.certiv.fluentmark.ui.editor.AnnotationImageProvider"
            annotationType="net.certiv.fluentmark.ui.task.plantuml"
            includeOnPreferencePage="true"
            label="PlantUML Tasks">
      </specification>
   </extension>
   
    <extension
       point="org.eclipse.ui.editors.templates">
    	<contextType
           class="net.certiv.fluentmark.ui.editor.assist.SourceTemplateContextType"
           id="net.certiv.fluentmark.ui.templateContext"
           name="Fluent Editor"
           registryId="net.certiv.fluentmark.ui.templates">
	    </contextType>
     <include
           file="resources/templates/templates.xml"
           translations="resources/templates/templates.properties">
     </include>
     <contextTypeRegistry
           id="net.certiv.fluentmark.ui.templates">
     </contextTypeRegistry>
	</extension>

   <extension
         point="org.eclipse.ui.workbench.texteditor.spellingEngine">
      <engine
            class="net.certiv.fluentmark.ui.spell.SpellingEngine"
            default="true"
            id="net.certiv.fluentmark.ui.spell.SpellingEngine"
            label="FluentMark spelling engine">
      </engine>
   </extension>

   <extension
         point="org.eclipse.ui.views">
      <category
            id="net.certiv.fluentmark.ui.views"
            name="FluentMark">
      </category>
      <view
            allowMultiple="false"
            category="net.certiv.fluentmark.ui.views"
            class="net.certiv.fluentmark.ui.views.FluentPreview"
            icon="icons/obj16/fluentmark_doc.png"
            id="net.certiv.fluentmark.ui.views.FluentPreview"
            name="FluentMark View"
            restorable="false">
      </view>
   </extension>

   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="net.certiv.fluentmark.ui.preferences.pages.PrefPageEditor"
            id="net.certiv.fluentmark.preferences.pages.PrefPageEditor"
            name="FluentMark">
      </page>
      <page
            category="net.certiv.fluentmark.preferences.pages.PrefPageEditor"
            class="net.certiv.fluentmark.ui.preferences.pages.PrefPageAppearance"
            id="net.certiv.fluentmark.preferences.PrefPageAppearance"
            name="Appearance">
      </page>
      <page
            category="net.certiv.fluentmark.preferences.pages.PrefPageEditor"
            class="net.certiv.fluentmark.ui.preferences.pages.PrefPageConvert"
            id="net.certiv.fluentmark.preferences.PrefPageConvert"
            name="Converters">
      </page>
      <page
            category="net.certiv.fluentmark.preferences.pages.PrefPageEditor"
            class="net.certiv.fluentmark.ui.preferences.pages.PrefPageGraphviz"
            id="net.certiv.fluentmark.preferences.PrefPageGraphviz"
            name="PlantUML and Graphviz / DOT">
      </page>
      <page
            category="net.certiv.fluentmark.preferences.pages.PrefPageEditor"
            class="net.certiv.fluentmark.ui.preferences.pages.PrefPageSpeller"
            id="net.certiv.fluentmark.preferences.PrefPageSpeller"
            name="Spelling">
      </page>
      <page
            category="net.certiv.fluentmark.preferences.pages.PrefPageEditor"
            class="net.certiv.fluentmark.ui.preferences.pages.PrefPageStyles"
            id="net.certiv.fluentmark.preferences.PrefPageStyles"
            name="Stylesheets">
      </page>
      <page
            category="net.certiv.fluentmark.preferences.pages.PrefPageEditor"
            class="net.certiv.fluentmark.ui.preferences.pages.PrefPageTemplates"
            id="net.certiv.fluentmark.preferences.PrefPageTemplates"
            name="Templates">
      </page>
      <page
            category="net.certiv.fluentmark.preferences.pages.PrefPageEditor"
            class="net.certiv.fluentmark.ui.preferences.pages.PrefPageFolding"
            id="net.certiv.fluentmark.preferences.pages.PrefPageFolding"
            name="Folding">
      </page>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="net.certiv.fluentmark.ui.preferences.PrefsInit">
      </initializer>
   </extension>

   <extension
         point="org.eclipse.ui.menus">
      
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="net.certiv.fluentmark.ui.MarkdownEditor">
            <command
                  commandId="net.certiv.fluentmark.bold"
                  icon="icons/etool16/style_bold.png"
                  style="push"
                  tooltip="Toggle bold font">
               <visibleWhen>
                  <reference
                        definitionId="net.certiv.fluentmark.editorVisible">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="net.certiv.fluentmark.italic"
                  icon="icons/etool16/style_italic.png"
                  style="push"
                  tooltip="Toggle italic font">
               <visibleWhen>
                  <reference
                        definitionId="net.certiv.fluentmark.editorVisible">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="net.certiv.fluentmark.hiddenComment"
                  icon="icons/etool16/comment-hidden.png"
                  style="push"
                  tooltip="Toggle hidden comment">
               <visibleWhen>
                  <reference
                        definitionId="net.certiv.fluentmark.editorVisible">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="net.certiv.fluentmark.visibleComment"
                  icon="icons/etool16/comment-visible.png"
                  style="push"
                  tooltip="Toggle visible comment">
               <visibleWhen>
                  <reference
                        definitionId="net.certiv.fluentmark.editorVisible">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="net.certiv.fluentmark.format"
                  icon="icons/etool16/cpyqual_menu.png"
                  style="push"
                  tooltip="Format code">
               <visibleWhen>
                  <reference
                        definitionId="net.certiv.fluentmark.editorVisible">
                  </reference>
               </visibleWhen>
            </command>
            <separator
                  name="net.certiv.fluentmark.separator"
                  visible="true">
            </separator>
            <command
                  commandId="net.certiv.fluentmark.openView"
                  icon="icons/obj16/fluentmark_doc.png"
                  style="push"
                  tooltip="Open FluentMark Viewer">
               <visibleWhen>
                  <reference
                        definitionId="net.certiv.fluentmark.editorVisible">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="net.certiv.fluentmark.exportHtml"
                  icon="icons/etool16/htmlexport.gif"
                  style="push"
                  tooltip="Export as HTML">
               <visibleWhen>
                  <reference
                        definitionId="net.certiv.fluentmark.editorVisible">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="net.certiv.fluentmark.exportPdf"
                  icon="icons/obj16/pdf.png"
                  style="push"
                  tooltip="Export as PDF">
               <visibleWhen>
                  <reference
                        definitionId="net.certiv.fluentmark.editorVisible">
                  </reference>
               </visibleWhen>
            </command>
         </toolbar>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:net.certiv.fluentmark.ui.views.FluentPreview">
         <command
               commandId="net.certiv.fluentmark.refreshView"
               icon="icons/obj16/refresh.gif"
               label="Refresh"
               style="push"
               tooltip="Refresh/redisplay view contents">
         </command>
         <command
               commandId="net.certiv.fluentmark.openStylesheets"
               icon="icons/obj16/css.png"
               label="Stylesheets"
               style="push"
               tooltip="Open stylesheet preferences">
         </command>
         <command
               commandId="net.certiv.fluentmark.showHtmlCode"
               icon="icons/etool16/html_tag_obj.png"
               label="Source Code"
               style="push"
               tooltip="Show HTML source code">
         </command>
         <command
               commandId="net.certiv.fluentmark.firebug"
               icon="icons/obj16/firebug.png"
               label="Firebug"
               style="push"
               tooltip="Open Firebug console">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <menu
               icon="icons/obj16/fluentmark_doc.png"
               id="net.certiv.fluentmark.ui.markdown.menu"
               label="Markdown">
            <command
                  commandId="net.certiv.fluentmark.ui.addMarkdownValidationsBuilder"
                  icon="icons/obj16/fluentmark_doc.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <adapt
                              type="org.eclipse.core.resources.IProject">
                        </adapt>
                     </iterate>
                     <iterate>
                        <not>
                           <test
                                 forcePluginActivation="true"
                                 property="net.certiv.fluentmark.ui.isEnabled">
                           </test>
                        </not>
                     </iterate>
                     <iterate>
                        <test
                              forcePluginActivation="true"
                              property="net.certiv.fluentmark.ui.isAccessible">
                        </test>
                     </iterate>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="net.certiv.fluentmark.ui.removeMarkdownValidationsBuilder"
                  icon="icons/obj16/fluentmark_doc.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <adapt
                              type="org.eclipse.core.resources.IProject">
                        </adapt>
                     </iterate>
                     <iterate>
                        <test
                              forcePluginActivation="true"
                              property="net.certiv.fluentmark.ui.isEnabled">
                        </test>
                     </iterate>
                     <iterate>
                        <test
                              forcePluginActivation="true"
                              property="net.certiv.fluentmark.ui.isAccessible">
                        </test>
                     </iterate>
                  </and>
               </visibleWhen>
            </command>
            <command
                  commandId="net.certiv.fluentmark.ui.revalidate"
                  icon="icons/obj16/fluentmark_doc.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <and>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <adapt
                              type="org.eclipse.core.resources.IProject">
                        </adapt>
                     </iterate>
                     <iterate>
                        <test
                              forcePluginActivation="true"
                              property="net.certiv.fluentmark.ui.isEnabled">
                        </test>
                     </iterate>
                     <iterate>
                        <test
                              forcePluginActivation="true"
                              property="net.certiv.fluentmark.ui.isAccessible">
                        </test>
                     </iterate>
                  </and>
               </visibleWhen>
            </command>
            <separator
                  name="net.certiv.fluentmark.ui.validationGroup"
                  visible="true">
            </separator>
            <menu
                  id="net.certiv.fluentmark.ui.markdown.refactoring.menu"
                  label="Refactoring">
               <command
                     commandId="net.certiv.fluentmark.ui.refactoring.replaceSvgWithPuml"
                     icon="icons/obj16/fluentmark_doc.png"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <or>
                        <iterate
                              ifEmpty="false"
                              operator="and">
                           <adapt
                                 type="org.eclipse.core.resources.IResource">
                           </adapt>
                           <test
                                 forcePluginActivation="true"
                                 property="net.certiv.fluentmark.ui.isAccessible">
                           </test>
                        </iterate>
                        <iterate>
                           <and>
                              <instanceof
                                    value="org.eclipse.jface.text.ITextSelection">
                              </instanceof>
                              <test
                                    forcePluginActivation="true"
                                    property="net.certiv.fluentmark.ui.isActiveFluentEditor">
                              </test>
                              <test
                                    forcePluginActivation="true"
                                    property="net.certiv.fluentmark.ui.isMarkdownSvgImageTextSelection">
                              </test>
                           </and>
                        </iterate>
                     </or>
                  </visibleWhen>
               </command>
            </menu>
         </menu>
      </menuContribution>
   </extension>
   
   <extension
         point="org.eclipse.ui.commands">
      <category
            description="FluentMark Editor"
            id="net.certiv.fluentmark.commands"
            name="FluentMark">
      </category>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.OpenMdViewHandler"
            id="net.certiv.fluentmark.openView"
            name="Open FluentMark View">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.OpenStylesheetsHandler"
            description="Open stylesheets preference"
            id="net.certiv.fluentmark.openStylesheets"
            name="OpenStylesheets">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.ExportHtmlHandler"
            description="Export as Html"
            id="net.certiv.fluentmark.exportHtml"
            name="ExportHTML">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.ExportPdfHandler"
            description="Export as PDF"
            id="net.certiv.fluentmark.exportPdf"
            name="ExportPDF">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.RefreshViewHandler"
            description="Refresh view"
            id="net.certiv.fluentmark.refreshView"
            name="Refresh view">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.FormatHandler"
            description="Format"
            id="net.certiv.fluentmark.format"
            name="Format">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.UnwrapHandler"
            description="Unwrap text"
            id="net.certiv.fluentmark.unwrap"
            name="Unwrap">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.ToggleHiddenCommentHandler"
            description="Toggle Hidden Comment"
            id="net.certiv.fluentmark.hiddenComment"
            name="Hidden Comment ">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.ToggleVisibleCommentHandler"
            description="Toggle Visible Comment"
            id="net.certiv.fluentmark.visibleComment"
            name="Visible Comment">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.BoldHandler"
            description="Bold"
            id="net.certiv.fluentmark.bold"
            name="Bold">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.ItalicHandler"
            description="Italic"
            id="net.certiv.fluentmark.italic"
            name="Italic">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            description="Firebug"
            id="net.certiv.fluentmark.firebug"
            name="Firebug">
      </command>
      <command
            categoryId="net.certiv.fluentmark.commands"
            defaultHandler="net.certiv.fluentmark.ui.handlers.ShowHtmlSourceCodeHandler"
            description="Show the HTML code generated from the given Markdown code"
            id="net.certiv.fluentmark.showHtmlCode"
            name="Show HTML source code">
      </command>
      <command
            defaultHandler="net.certiv.fluentmark.ui.handlers.AddMarkerCalculationBuilderHandler"
            id="net.certiv.fluentmark.ui.addMarkdownValidationsBuilder"
            name="Check Markdown code and references">
      </command>
      <command
            defaultHandler="net.certiv.fluentmark.ui.handlers.RemoveMarkerCalculationBuilderHandler"
            id="net.certiv.fluentmark.ui.removeMarkdownValidationsBuilder"
            name="Do not check Markdown code and references">
      </command>
      <command
            defaultHandler="net.certiv.fluentmark.ui.handlers.RecalculateMarkersHandler"
            id="net.certiv.fluentmark.ui.revalidate"
            name="Re-check Markdown code and references">
      </command>
      <command
            defaultHandler="net.certiv.fluentmark.ui.handlers.ReplaceSvgImagesWithPlantUmlImagesHandler"
            id="net.certiv.fluentmark.ui.refactoring.replaceSvgWithPuml"
            name="Replace SVG images with PlantUML images (*.puml files)">
      </command>
   </extension>

   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="net.certiv.fluentmark.ui.handlers.OpenMdViewHandler"
            commandId="net.certiv.fluentmark.openView">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="net.certiv.fluentmark.ui.handlers.OpenStylesheetsHandler"
            commandId="net.certiv.fluentmark.openStylesheets">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="net.certiv.fluentmark.ui.handlers.ExportHtmlHandler"
            commandId="net.certiv.fluentmark.exportHtml">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="net.certiv.fluentmark.ui.handlers.ExportPdfHandler"
            commandId="net.certiv.fluentmark.exportPdf">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="net.certiv.fluentmark.ui.handlers.FormatHandler"
            commandId="net.certiv.fluentmark.format">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="net.certiv.fluentmark.ui.handlers.UnwrapHandler"
            commandId="net.certiv.fluentmark.unwrap">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="net.certiv.fluentmark.ui.handlers.ToggleHiddenCommentHandler"
            commandId="net.certiv.fluentmark.hiddenComment">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="net.certiv.fluentmark.ui.handlers.ToggleVisibleCommentHandler"
            commandId="net.certiv.fluentmark.visibleComment">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="net.certiv.fluentmark.ui.handlers.BoldHandler"
            commandId="net.certiv.fluentmark.bold">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      
      <handler
            class="net.certiv.fluentmark.ui.handlers.ItalicHandler"
            commandId="net.certiv.fluentmark.italic">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      
      <handler
            class="net.certiv.fluentmark.ui.handlers.FirebugHandler"
            commandId="net.certiv.fluentmark.firebug">
         <activeWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="net.certiv.fluentmark.editorVisible">
            </reference>
         </enabledWhen>
      </handler>
      
   </extension>
   
   <extension
         point="org.eclipse.ui.contexts">
      <context
            description="FluentMark Editor"
            id="net.certiv.fluentmark.ui.editorScope"
            name="FluentMark"
            parentId="org.eclipse.ui.textEditorScope">
      </context>
   </extension>   

   <extension
         point="org.eclipse.ui.bindings">

      <!--  win32:  M1=CTRL,    M2=SHIFT, M3=ALT, M4=-
            carbon: M1=COMMAND, M2=SHIFT, M3=ALT, M4=CTRL -->
         
      <key
            commandId="net.certiv.fluentmark.format"
            contextId="net.certiv.fluentmark.ui.editorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+F">
      </key>
      <key
            commandId="net.certiv.fluentmark.unwrap"
            contextId="net.certiv.fluentmark.ui.editorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+M3+F">
      </key>
      <key
            commandId="net.certiv.fluentmark.hiddenComment"
            contextId="net.certiv.fluentmark.ui.editorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+/">
      </key>
      <key
            commandId="net.certiv.fluentmark.visibleComment"
            contextId="net.certiv.fluentmark.ui.editorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+/">
      </key>
      <key
            commandId="net.certiv.fluentmark.bold"
            contextId="net.certiv.fluentmark.ui.editorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+B">
      </key>
      <key
            commandId="net.certiv.fluentmark.italic"
            contextId="net.certiv.fluentmark.ui.editorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+I">
      </key>
      <key
            commandId="org.eclipse.ui.edit.text.open.hyperlink"
            contextId="net.certiv.fluentmark.ui.editorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="F3">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="net.certiv.fluentmark.ui.wizards"
            name="FluentMark">
      </category>
      <wizard
            category="net.certiv.fluentmark.ui.wizards"
            class="net.certiv.fluentmark.ui.wizards.FluentNewWizard"
            icon="icons/obj16/fluentmark_doc.png"
            id="net.certiv.fluentmark.ui.wizards.FluentNewWizard"
            name="FluentMark file">
      </wizard>
   </extension>
   <extension
         id="builders.markdown"
         name="Markdown file validator"
         point="org.eclipse.core.resources.builders">
      <builder
            callOnEmptyDelta="false"
            hasNature="false">
         <run
               class="net.certiv.fluentmark.ui.builders.IncrementalMarkdownValidationProjectBuilder">
         </run>
      </builder>
   </extension>
   <extension
         id="builders.plantuml"
         name="PlantUML file and code blocks in Markdown files validator"
         point="org.eclipse.core.resources.builders">
      <builder
            callOnEmptyDelta="false"
            hasNature="false">
         <run
               class="net.certiv.fluentmark.ui.builders.IncrementalPlantUmlValidationProjectBuilder">
         </run>
      </builder>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="net.certiv.fluentmark.ui.propertytesters.MarkdownValidationsBuilderEnabledTester"
            id="net.certiv.fluentmark.ui.MarkdownBuilderEnabledTester"
            namespace="net.certiv.fluentmark.ui"
            properties="isEnabled"
            type="java.lang.Object">
      </propertyTester>
      <propertyTester
            class="net.certiv.fluentmark.ui.propertytesters.ResourceAccessibleTester"
            id="net.certiv.fluentmark.ui.ResourceAccessibleTester"
            namespace="net.certiv.fluentmark.ui"
            properties="isAccessible"
            type="java.lang.Object">
      </propertyTester>
      <propertyTester
            class="net.certiv.fluentmark.ui.propertytesters.ActiveEditorPartTester"
            id="net.certiv.fluentmark.ui.activeEditorPartTester"
            namespace="net.certiv.fluentmark.ui"
            properties="activeEditorPart,isActiveFluentEditor,isMarkdownSvgImageTextSelection"
            type="java.lang.Object">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            adaptable="true"
            class="net.certiv.fluentmark.ui.decorators.MarkdownFileValidationsDecorator"
            id="net.certiv.fluentmark.ui.decorator"
            label="Checking Markdown files enabled"
            lightweight="true"
            state="true">
         <enablement>
            <and>
               <objectClass
                     name="org.eclipse.core.resources.IProject">
               </objectClass>
            </and>
         </enablement>
         <description>
            description body text
         </description>
      </decorator>
   </extension>
   <extension
         point="net.certiv.fluentmark.ui.marker.calculators">
      <calculator
            class="net.certiv.fluentmark.ui.validation.MarkdownLinkValidator"
            id="net.certiv.fluentmark.ui.validator.markdown">
      </calculator>
      <calculator
            class="net.certiv.fluentmark.ui.markers.MarkdownTaskMarkerCreator"
            id="net.certiv.fluentmark.ui.markers.tasks.markdown">
      </calculator>
      <calculator
            class="net.certiv.fluentmark.ui.markers.PlantUmlTaskMarkerCreator"
            id="net.certiv.fluentmark.ui.markers.tasks.plantuml">
      </calculator>
      <calculator
            class="net.certiv.fluentmark.ui.validation.MarkdownAnchorValidator"
            id="net.certiv.fluentmark.ui.validator.markdown.anchors">
      </calculator>
   </extension>
   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectors">
      <hyperlinkDetector
            activate="true"
            class="net.certiv.fluentmark.ui.editor.hyperlinks.MarkdownHyperlinkDetector"
            id="net.certiv.fluentmark.ui.markdownHyperlinkDetector"
            name="Markdown Hyperlink Detector"
            targetId="net.certiv.fluentmark.ui.markdownCode">
      </hyperlinkDetector>
      <hyperlinkDetector
            activate="true"
            class="net.certiv.fluentmark.ui.editor.hyperlinks.UrlHyperlinkDetector"
            id="net.certiv.fluentmark.ui.UrlHyperlinkDetector"
            name="URLHyperlinkDetector"
            targetId="org.eclipse.ui.DefaultTextEditor">
      </hyperlinkDetector>
   </extension>
   <extension
         point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectorTargets">
      <target
            description="Open Markdown code in FluentMark editor"
            id="net.certiv.fluentmark.ui.markdownCode"
            name="FluentMark Editor">
         <context
               type="net.certiv.fluentmark.ui.editorScope">
         </context>
      </target>
   </extension>
   <extension
         point="net.certiv.fluentmark.core.anchorResolver">
      <resolver
            class="net.certiv.fluentmark.ui.validation.JavaCodeMemberResolver"
            id="net.certiv.fluentmark.ui.resolver.java">
      </resolver>
   </extension>
   <extension
         point="net.certiv.fluentmark.core.partitionValidator">
      <validator
            class="net.certiv.fluentmark.ui.markers.MarkdownTaskMarkerFinder"
            id="net.certiv.fluentmark.ui.validation.tasks.markdown">
      </validator>
      <validator
            class="net.certiv.fluentmark.ui.markers.PlantUmlTaskMarkerFinder"
            id="net.certiv.fluentmark.ui.validation.tasks.plantuml">
      </validator>
   </extension>
   
</plugin>
